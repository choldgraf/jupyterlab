

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Extension Developer Guide &mdash; JupyterLab 1.0 Beta documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="JupyterLab 1.0 Beta documentation" href="../index.html"/>
        <link rel="next" title="Documents" href="documents.html"/>
        <link rel="prev" title="General Codebase Orientation" href="repo.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> JupyterLab
          

          
          </a>

          
            
            
              <div class="version">
                1.0 Beta
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/starting.html">Starting JupyterLab</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/interface.html">The JupyterLab Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/files.html">Working with Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/file_editor.html">File Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/notebook.html">Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/code_console.html">Code Consoles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/terminal.html">Terminals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/running.html">Managing Kernels and Terminals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/commands.html">Command Palette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/documents_kernels.html">Documents and kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/file_formats.html">File and Output Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/extensions.html">Extensions</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="repo.html">General Codebase Orientation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Extension Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#plugins">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#application-object">Application Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jupyterlab-shell">JupyterLab Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#phosphor">Phosphor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extension-authoring">Extension Authoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mime-renderer-extensions">Mime Renderer Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#themes">Themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#standard-general-purpose-extensions">Standard (General-Purpose) Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extension-settings">Extension Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#storing-extension-data">Storing Extension Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#state-database">State Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#context-menus">Context Menus</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="documents.html">Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebook.html">Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="patterns.html">Design Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="css.html">CSS Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Writing Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualdom.html">Virtual DOM and React</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_content.html">Adding Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="xkcd_extension_tutorial.html">Let’s Make an xkcd JupyterLab Extension</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">JupyterLab</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Extension Developer Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developer/extension_dev.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="extension-developer-guide">
<span id="developer-extensions"></span><h1>Extension Developer Guide<a class="headerlink" href="#extension-developer-guide" title="Permalink to this headline">¶</a></h1>
<p>JupyterLab can be extended in three ways via:</p>
<ul class="simple">
<li><strong>application plugins (top level):</strong> Application plugins extend the
functionality of JupyterLab itself.</li>
<li><strong>mime renderer extension (top level):</strong> Mime Renderer extensions are
a convenience for creating an extension that can render mime data and
potentially render files of a given type.</li>
<li>document widget extensions (lower level): Document widget extensions
extend the functionality of document widgets added to the
application, and we cover them in the “Documents” tutorial.</li>
</ul>
<p>See <a class="reference internal" href="xkcd_extension_tutorial.html#xkcd-extension-tutorial"><span class="std std-ref">Let’s Make an xkcd JupyterLab Extension</span></a> to learn how to make a simple JupyterLab extension.</p>
<p>A JupyterLab application is comprised of:</p>
<ul class="simple">
<li>A core Application object</li>
<li>Plugins</li>
</ul>
<div class="section" id="plugins">
<h2>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h2>
<p>A plugin adds a core functionality to the application:</p>
<ul>
<li><p class="first">A plugin can require other plugins for operation.</p>
</li>
<li><p class="first">A plugin is activated when it is needed by other plugins, or when
explicitly activated.</p>
</li>
<li><p class="first">Plugins require and provide <code class="docutils literal"><span class="pre">Token</span></code> objects, which are used to
provide a typed value to the plugin’s <code class="docutils literal"><span class="pre">activate()</span></code> method.</p>
</li>
<li><p class="first">The module providing plugin(s) must meet the
<a class="reference external" href="http://jupyterlab.github.io/jupyterlab/interfaces/_application_src_index_.jupyterlab.ipluginmodule.html">JupyterLab.IPluginModule</a>
interface, by exporting a plugin object or array of plugin objects as
the default export.</p>
<p>We provide two cookie cutters to create JuptyerLab plugin extensions in
<cite>CommonJS &lt;https://github.com/jupyterlab/extension-cookiecutter-js&gt;</cite> and
<cite>TypeScript &lt;https://github.com/jupyterlab/extension-cookiecutter-ts&gt;</cite>.</p>
</li>
</ul>
<p>The default plugins in the JupyterLab application include:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/terminal-extension/src/index.ts">Terminal</a>
- Adds the ability to create command prompt terminals.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/shortcuts-extension/src/index.ts">Shortcuts</a>
- Sets the default set of shortcuts for the application.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/imageviewer-extension/src/index.ts">Images</a>
- Adds a widget factory for displaying image files.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/help-extension/src/index.ts">Help</a>
- Adds a side bar widget for displaying external documentation.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/filebrowser-extension/src/index.ts">File
Browser</a>
- Creates the file browser and the document manager and the file
browser to the side bar.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/fileeditor-extension/src/index.ts">Editor</a>
- Add a widget factory for displaying editable source files.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/console-extension/src/index.ts">Console</a>
- Adds the ability to launch Jupyter Console instances for
interactive kernel console sessions.</li>
</ul>
<p>A dependency graph for the core JupyterLab plugins (along with links to
their source) is shown here: <img alt="dependencies" src="../_images/dependency-graph.svg" /></p>
</div>
<div class="section" id="application-object">
<h2>Application Object<a class="headerlink" href="#application-object" title="Permalink to this headline">¶</a></h2>
<p>The JupyterLab Application object is given to each plugin in its
<code class="docutils literal"><span class="pre">activate()</span></code> function. The Application object has a:</p>
<ul class="simple">
<li>commands - used to add and execute commands in the application.</li>
<li>keymap - used to add keyboard shortcuts to the application.</li>
<li>shell - a JupyterLab shell instance.</li>
</ul>
</div>
<div class="section" id="jupyterlab-shell">
<h2>JupyterLab Shell<a class="headerlink" href="#jupyterlab-shell" title="Permalink to this headline">¶</a></h2>
<p>The JupyterLab
<a class="reference external" href="http://jupyterlab.github.io/jupyterlab/classes/_application_src_shell_.applicationshell.html">shell</a>
is used to add and interact with content in the application. The
application consists of:</p>
<ul class="simple">
<li>A top area for things like top level menus and toolbars</li>
<li>Left and right side bar areas for collapsible content</li>
<li>A main area for user activity.</li>
<li>A bottom area for things like status bars</li>
</ul>
</div>
<div class="section" id="phosphor">
<h2>Phosphor<a class="headerlink" href="#phosphor" title="Permalink to this headline">¶</a></h2>
<p>The Phosphor library is used as the underlying architecture of
JupyterLab and provides many of the low level primitives and widget
structure used in the application. Phosphor provides a rich set of
widgets for developing desktop-like applications in the browser, as well
as patterns and objects for writing clean, well-abstracted code. The
widgets in the application are primarily <strong>Phosphor widgets</strong>, and
Phosphor concepts, like message passing and signals, are used
throughout. <strong>Phosphor messages</strong> are a <em>many-to-one</em> interaction that
allows information like resize events to flow through the widget
hierarchy in the application. <strong>Phosphor signals</strong> are a <em>one-to-many</em>
interaction that allow listeners to react to changes in an observed
object.</p>
</div>
<div class="section" id="extension-authoring">
<h2>Extension Authoring<a class="headerlink" href="#extension-authoring" title="Permalink to this headline">¶</a></h2>
<p>An Extension is a valid <a class="reference external" href="https://docs.npmjs.com/getting-started/what-is-npm">npm
package</a> that
meets the following criteria:</p>
<ul class="simple">
<li>Exports one or more JupyterLab plugins as the default export in its
main file.</li>
<li>Has a <code class="docutils literal"><span class="pre">jupyterlab</span></code> key in its <code class="docutils literal"><span class="pre">package.json</span></code> which has
<code class="docutils literal"><span class="pre">&quot;extension&quot;</span></code> metadata. The value can be <code class="docutils literal"><span class="pre">true</span></code> to use the main
module of the package, or a string path to a specific module (e.g.
<code class="docutils literal"><span class="pre">&quot;lib/foo&quot;</span></code>).</li>
</ul>
<p>While authoring the extension, you can use the command:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span>   <span class="c1"># install npm package dependencies</span>
<span class="n">npm</span> <span class="n">run</span> <span class="n">build</span>  <span class="c1"># optional build step if using TypeScript, babel, etc.</span>
<span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span>  <span class="c1"># install the current directory as an extension</span>
</pre></div>
</div>
<p>This causes the builder to re-install the source folder before building
the application files. You can re-build at any time using
<code class="docutils literal"><span class="pre">jupyter</span> <span class="pre">lab</span> <span class="pre">build</span></code> and it will reinstall these packages. You can also
link other local npm packages that you are working on simultaneously
using <code class="docutils literal"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">link</span></code>; they will be re-installed but not
considered as extensions. Local extensions and linked packages are
included in <code class="docutils literal"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">list</span></code>.</p>
<p>When using local extensions and linked packages, you can run the command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">lab</span> <span class="o">--</span><span class="n">watch</span>
</pre></div>
</div>
<p>This will cause the application to incrementally rebuild when one of the
linked packages changes. Note that only compiled JavaScript files (and
the CSS files) are watched by the WebPack process.</p>
<p>Note that the application is built against <strong>released</strong> versions of the
core JupyterLab extensions. If your extension depends on JupyterLab
packages, it should be compatible with the dependencies in the
<code class="docutils literal"><span class="pre">jupyterlab/static/package.json</span></code> file. If you must install a extension
into a development branch of JupyterLab, you have to graft it into the
source tree of JupyterLab itself. This may be done using the command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">run</span> <span class="n">add</span><span class="p">:</span><span class="n">sibling</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">url</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>in the JupyterLab root directory, where <code class="docutils literal"><span class="pre">&lt;path-or-url&gt;</span></code> refers either
to an extension npm package on the local filesystem, or a URL to a git
repository for an extension npm package. This operation may be
subsequently reversed by running</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">run</span> <span class="n">remove</span><span class="p">:</span><span class="n">package</span> <span class="o">&lt;</span><span class="n">extension</span><span class="o">-</span><span class="nb">dir</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This will remove the package metadata from the source tree, but wil
<strong>not</strong> remove any files added by the <code class="docutils literal"><span class="pre">addsibling</span></code> script, which
should be removed manually.</p>
<p>The package should export EMCAScript 5 compatible JavaScript. It can
import CSS using the syntax <code class="docutils literal"><span class="pre">require('foo.css')</span></code>. The CSS files can
also import CSS from other packages using the syntax
<code class="docutils literal"><span class="pre">&#64;import</span> <span class="pre">url('~foo/index.css')</span></code>, where <code class="docutils literal"><span class="pre">foo</span></code> is the name of the
package.</p>
<p>The following file types are also supported (both in JavaScript and
CSS): json, html, jpg, png, gif, svg, js.map, woff2, ttf, eot.</p>
<p>If your package uses any other file type it must be converted to one of
the above types. If your JavaScript is written in any other dialect than
EMCAScript 5 it must be converted using an appropriate tool.</p>
<p>If you publish your extension on npm.org, users will be able to install
it as simply <code class="docutils literal"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">install</span> <span class="pre">&lt;foo&gt;</span></code>, where <code class="docutils literal"><span class="pre">&lt;foo&gt;</span></code> is
the name of the published npm package. You can alternatively provide a
script that runs <code class="docutils literal"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">install</span></code> against a local folder
path on the user’s machine or a provided tarball. Any valid
<code class="docutils literal"><span class="pre">npm</span> <span class="pre">install</span></code> specifier can be used in
<code class="docutils literal"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">install</span></code> (e.g. <code class="docutils literal"><span class="pre">foo&#64;latest</span></code>, <code class="docutils literal"><span class="pre">bar&#64;3.0.0.0</span></code>,
<code class="docutils literal"><span class="pre">path/to/folder</span></code>, and <code class="docutils literal"><span class="pre">path/to/tar.gz</span></code>).</p>
</div>
<div class="section" id="mime-renderer-extensions">
<h2>Mime Renderer Extensions<a class="headerlink" href="#mime-renderer-extensions" title="Permalink to this headline">¶</a></h2>
<p>Mime Renderer extensions are a convenience for creating an extension
that can render mime data and potentially render files of a given type.
We provide cookiecutters for Mime render extensions in
<a class="reference external" href="https://github.com/jupyterlab/mimerender-cookiecutter">JavaScript</a> and
<a class="reference external" href="https://github.com/jupyterlab/mimerender-cookiecutter-ts">TypeScript</a>.</p>
<p>Mime renderer extensions are more declarative than standard extensions.
The extension is treated the same from the command line perspective
(<code class="docutils literal"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">install</span></code> ), but it does not directly create
JupyterLab plugins. Instead it exports an interface given in the
<a class="reference external" href="http://jupyterlab.github.io/jupyterlab/interfaces/_rendermime_interfaces_src_index_.irendermime.iextension.html">rendermime-interfaces</a>
package.</p>
<p>The JupyterLab repo has an example mime renderer extension for
<a class="reference external" href="https://github.com/jupyterlab/jupyterlab/tree/master/packages/pdf-extension">pdf</a>
files. It provides a mime renderer for pdf data and registers itself as
a document renderer for pdf file types.</p>
<p>The <code class="docutils literal"><span class="pre">rendermime-interfaces</span></code> package is intended to be the only
JupyterLab package needed to create a mime renderer extension (using the
interfaces in TypeScript or as a form of documentation if using plain
JavaScript).</p>
<p>The only other difference from a standard extension is that has a
<code class="docutils literal"><span class="pre">jupyterlab</span></code> key in its <code class="docutils literal"><span class="pre">package.json</span></code> with <code class="docutils literal"><span class="pre">&quot;mimeExtension&quot;</span></code>
metadata. The value can be <code class="docutils literal"><span class="pre">true</span></code> to use the main module of the
package, or a string path to a specific module (e.g. <code class="docutils literal"><span class="pre">&quot;lib/foo&quot;</span></code>).</p>
<p>The mime renderer can update its data by calling <code class="docutils literal"><span class="pre">.setData()</span></code> on the
model it is given to render. This can be used for example to add a
<code class="docutils literal"><span class="pre">png</span></code> representation of a dynamic figure, which will be picked up by a
notebook model and added to the notebook document. When using
<code class="docutils literal"><span class="pre">IDocumentWidgetFactoryOptions</span></code>, you can update the document model by
calling <code class="docutils literal"><span class="pre">.setData()</span></code> with updated data for the rendered MIME type. The
document can then be saved by the user in the usual manner.</p>
</div>
<div class="section" id="themes">
<h2>Themes<a class="headerlink" href="#themes" title="Permalink to this headline">¶</a></h2>
<p>A theme is a JupyterLab extension that uses a <code class="docutils literal"><span class="pre">ThemeManager</span></code> and can
be loaded and unloaded dynamically. The package must include all static
assets that are referenced by <code class="docutils literal"><span class="pre">url()</span></code> in its CSS files. Local URLs can
be used to reference files relative to the location of the referring CSS
file in the theme directory. For example <code class="docutils literal"><span class="pre">url('images/foo.png')</span></code> or
<code class="docutils literal"><span class="pre">url('../foo/bar.css')</span></code>can be used to refer local files in the
theme. Absolute URLs (starting with a <code class="docutils literal"><span class="pre">/</span></code>) or external URLs (e.g.
<code class="docutils literal"><span class="pre">https:</span></code>) can be used to refer to external assets. The path to the
theme assets is specified <code class="docutils literal"><span class="pre">package.json</span></code> under the <code class="docutils literal"><span class="pre">&quot;jupyterlab&quot;</span></code>
key as <code class="docutils literal"><span class="pre">&quot;themeDir&quot;</span></code>. See the <a class="reference external" href="https://github.com/jupyterlab/jupyterlab/tree/master/packages/theme-light-extension">JupyterLab Light
Theme</a>
for an example. Ensure that the theme files are included in the
<code class="docutils literal"><span class="pre">&quot;files&quot;</span></code> metadata in package.json. A theme can optionally specify an
<code class="docutils literal"><span class="pre">embed.css</span></code> file that can be consumed outside of a JupyterLab
application.</p>
<p>To quickly create a theme based on the JupyterLab Light Theme, follow
the instructions in the <a class="reference external" href="CONTRIBUTING.html#setting-up-a-development-environment">contributing
guide</a> and
then run <code class="docutils literal"><span class="pre">jlpm</span> <span class="pre">run</span> <span class="pre">create:theme</span></code> from the repository root directory.
Once you select a name, title and a description, a new theme folder will
be created in the current directory. You can move that new folder to a
location of your choice, and start making desired changes.</p>
<p>The theme extension is installed the same as a regular extension (see
[extension authoring](#Extension Authoring)).</p>
</div>
<div class="section" id="standard-general-purpose-extensions">
<h2>Standard (General-Purpose) Extensions<a class="headerlink" href="#standard-general-purpose-extensions" title="Permalink to this headline">¶</a></h2>
<p>See the example, <a class="reference external" href="./notebook.html#how-to-extend-the-notebook-plugin">How to Extend the Notebook
Plugin</a>. Notice
that the mime renderer and themes extensions above use a limited,
simplified interface to JupyterLab’s extension system. Modifying the
notebook plugin requires the full, general-purpose interface to the
extension system.</p>
</div>
<div class="section" id="extension-settings">
<h2>Extension Settings<a class="headerlink" href="#extension-settings" title="Permalink to this headline">¶</a></h2>
<p>An extension can specify user settings using a JSON Schema. The schema
definition should be in a file that resides in the <code class="docutils literal"><span class="pre">schemaDir</span></code>
directory that is specified in the <code class="docutils literal"><span class="pre">package.json</span></code> file of the
extension. The actual file name should use is the part that follows the
package name of extension. So for example, the JupyterLab
<code class="docutils literal"><span class="pre">apputils-extension</span></code> package hosts several plugins:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'&#64;jupyterlab/apputils-extension:menu'</span></code></li>
<li><code class="docutils literal"><span class="pre">'&#64;jupyterlab/apputils-extension:palette'</span></code></li>
<li><code class="docutils literal"><span class="pre">'&#64;jupyterlab/apputils-extension:settings'</span></code></li>
<li><code class="docutils literal"><span class="pre">'&#64;jupyterlab/apputils-extension:themes'</span></code></li>
</ul>
<p>And in the <code class="docutils literal"><span class="pre">package.json</span></code> for <code class="docutils literal"><span class="pre">&#64;jupyterlab/apputils-extension</span></code>, the
<code class="docutils literal"><span class="pre">schemaDir</span></code> field is a directory called <code class="docutils literal"><span class="pre">schema</span></code>. Since the
<code class="docutils literal"><span class="pre">themes</span></code> plugin requires a JSON schema, its schema file location is:
<code class="docutils literal"><span class="pre">schema/themes.json</span></code>. The plugin’s name is used to automatically
associate it with its settings file, so this naming convention is
important. Ensure that the schema files are included in the <code class="docutils literal"><span class="pre">&quot;files&quot;</span></code>
metadata in <code class="docutils literal"><span class="pre">package.json</span></code>.</p>
<p>See the
<a class="reference external" href="https://github.com/jupyterlab/jupyterlab/tree/master/packages/fileeditor-extension">fileeditor-extension</a>
for another example of an extension that uses settings.</p>
</div>
<div class="section" id="storing-extension-data">
<h2>Storing Extension Data<a class="headerlink" href="#storing-extension-data" title="Permalink to this headline">¶</a></h2>
<p>In addition to the file system that is accessed by using the
<code class="docutils literal"><span class="pre">&#64;jupyterlab/services</span></code> package, JupyterLab offers two ways for
extensions to store data: a client-side state database that is built on
top of <code class="docutils literal"><span class="pre">localStorage</span></code> and a plugin settings system that allows for
default setting values and user overrides.</p>
<div class="section" id="state-database">
<h3>State Database<a class="headerlink" href="#state-database" title="Permalink to this headline">¶</a></h3>
<p>The state database can be accessed by importing <code class="docutils literal"><span class="pre">IStateDB</span></code> from
<code class="docutils literal"><span class="pre">&#64;jupyterlab/coreutils</span></code> and adding it to the list of <code class="docutils literal"><span class="pre">requires</span></code> for
a plugin:</p>
<div class="code typescript highlight-default"><div class="highlight"><pre><span></span>const id = &#39;foo-extension:IFoo&#39;;

const IFoo = new Token&lt;IFoo&gt;(id);

interface IFoo {}

class Foo implements IFoo {}

const plugin: JupyterLabPlugin&lt;IFoo&gt; = {
  id,
  requires: [IStateDB],
  provides: IFoo,
  activate: (app: JupyterLab, state: IStateDB): IFoo =&gt; {
    const foo = new Foo();
    const key = `${id}:some-attribute`;

    // Load the saved plugin state and apply it once the app
    // has finished restoring its former layout.
    Promise.all([state.fetch(key), app.restored])
      .then(([saved]) =&gt; { /* Update `foo` with `saved`. */ });

    // Fulfill the plugin contract by returning an `IFoo`.
    return foo;
  },
  autoStart: true
};
</pre></div>
</div>
</div>
<div class="section" id="context-menus">
<h3>Context Menus<a class="headerlink" href="#context-menus" title="Permalink to this headline">¶</a></h3>
<p>JupyterLab has an application-wide context menu available as
<code class="docutils literal"><span class="pre">app.contextMenu</span></code>. See the Phosphor
<a class="reference external" href="http://phosphorjs.github.io/phosphor/api/widgets/interfaces/contextmenu.iitemoptions.html">docs</a>
for the item creation options. If you wish to preempt the the
application context menu, you can use a ‘contextmenu’ event listener and
call <code class="docutils literal"><span class="pre">event.stopPropagation</span></code> to prevent the application context menu
handler from being called (it is listening in the bubble phase on the
<code class="docutils literal"><span class="pre">document</span></code>). At this point you could show your own Phosphor
<a class="reference external" href="http://phosphorjs.github.io/phosphor/api/widgets/classes/contextmenu.html">contextMenu</a>,
or simply stop propagation and let the system context menu be shown.
This would look something like the following in a <code class="docutils literal"><span class="pre">Widget</span></code> subclass:</p>
<div class="code javascript highlight-default"><div class="highlight"><pre><span></span>// In `onAfterAttach()`
this.node.addEventListener(&#39;contextmenu&#39;, this);

// In `handleEvent()`
case &#39;contextmenu&#39;:
  event.stopPropagation();
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="documents.html" class="btn btn-neutral float-right" title="Documents" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="repo.html" class="btn btn-neutral" title="General Codebase Orientation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Project Jupyter.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0 Beta',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>