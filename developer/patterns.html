
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Design Patterns &#8212; JupyterLab 3.0.0a5 documentation</title>
    
  <link rel="stylesheet" href="../_static/css/index.d431a4ee1c1efae0e38bdfebc22debff.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.30270b6e4c972e43c488.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CSS Patterns" href="css.html" />
    <link rel="prev" title="Notebook" href="notebook.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../index.html">
      <img src="../_static/logo.png" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../getting_started/overview.html">Getting Started</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../user/interface.html">User Guide</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="repo.html">Developer Guide</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/jupyterlab/jupyterlab" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
        
          
              <li class="">
                  <a href="extension_dev.html">Extension Developer Guide</a>
              </li>
          
        
          
              <li class="">
                  <a href="extension_points.html">Common Extension Points</a>
              </li>
          
        
          
              <li class="">
                  <a href="contributing.html">Contributing to JupyterLab</a>
              </li>
          
        
          
              <li class="">
                  <a href="components.html">Using JupyterLab components</a>
              </li>
          
        
          
              <li class="">
                  <a href="ui_components.html">Reusing JupyterLab UI</a>
              </li>
          
        
          
              <li class="">
                  <a href="documents.html">Documents</a>
              </li>
          
        
          
              <li class="">
                  <a href="notebook.html">Notebook</a>
              </li>
          
        
          
              <li class="active">
                  <a href="">Design Patterns</a>
              </li>
          
        
          
              <li class="">
                  <a href="css.html">CSS Patterns</a>
              </li>
          
        
          
              <li class="">
                  <a href="virtualdom.html">React</a>
              </li>
          
        
          
              <li class="">
                  <a href="ui_helpers.html">User Interface Helpers</a>
              </li>
          
        
          
              <li class="">
                  <a href="terminology.html">Terminology</a>
              </li>
          
        
          
              <li class="">
                  <a href="extension_tutorial.html">Let’s Make an Astronomy Picture of the Day JupyterLab Extension</a>
              </li>
          
        
          
              <li class="">
                  <a href="extension_migration.html">JupyterLab 1.x to 2.x Extension Migration Guide</a>
              </li>
          
        
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#typescript" class="nav-link">TypeScript</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#initialization-options" class="nav-link">Initialization Options</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#contentfactory-option" class="nav-link">ContentFactory Option</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#static-namespace" class="nav-link">Static Namespace</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#private-module-namespace" class="nav-link">Private Module Namespace</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#disposables" class="nav-link">Disposables</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#messages" class="nav-link">Messages</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#signals" class="nav-link">Signals</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#models" class="nav-link">Models</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#getters-vs-methods" class="nav-link">Getters vs. Methods</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#data-structures" class="nav-link">Data Structures</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#dom-events" class="nav-link">DOM Events</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#promises" class="nav-link">Promises</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#command-names" class="nav-link">Command Names</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="design-patterns">
<h1>Design Patterns<a class="headerlink" href="#design-patterns" title="Permalink to this headline">¶</a></h1>
<p>There are several design patterns that are repeated throughout the
repository. This guide is meant to supplement the <a class="reference external" href="https://github.com/jupyterlab/jupyterlab/wiki/TypeScript-Style-Guide">TypeScript Style
Guide</a>.</p>
<div class="section" id="typescript">
<h2>TypeScript<a class="headerlink" href="#typescript" title="Permalink to this headline">¶</a></h2>
<p>TypeScript is used in all of the source code. TypeScript is used because
it provides features from the most recent EMCAScript 6 standards, while
providing type safety. The TypeScript compiler eliminates an entire
class of bugs, while making it much easier to refactor code.</p>
</div>
<div class="section" id="initialization-options">
<h2>Initialization Options<a class="headerlink" href="#initialization-options" title="Permalink to this headline">¶</a></h2>
<p>Objects will typically have an <code class="docutils literal notranslate"><span class="pre">IOptions</span></code> interface for initializing
the widget. The use of this interface enables options to be later added
while preserving backward compatibility.</p>
</div>
<div class="section" id="contentfactory-option">
<h2>ContentFactory Option<a class="headerlink" href="#contentfactory-option" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">A common option for a widget is a <code class="docutils literal notranslate"><span class="pre">IContentFactory</span></code>, which is used
to customize the child content in the widget.</div>
<div class="line">If not given, a <code class="docutils literal notranslate"><span class="pre">defaultRenderer</span></code> instance is used if no arguments
are required. In this way, widgets can be customized without
subclassing them, and widgets can support customization of their
nested content.</div>
</div>
</div>
<div class="section" id="static-namespace">
<h2>Static Namespace<a class="headerlink" href="#static-namespace" title="Permalink to this headline">¶</a></h2>
<p>An object class will typically have an exported static namespace sharing
the same name as the object. The namespace is used to declutter the
class definition.</p>
</div>
<div class="section" id="private-module-namespace">
<h2>Private Module Namespace<a class="headerlink" href="#private-module-namespace" title="Permalink to this headline">¶</a></h2>
<p>The “Private” module namespace is used to group variables and functions
that are not intended to be exported and may have otherwise existed as
module-level variables and functions. The use of the namespace also
makes it clear when a variable access is to an imported name or from the
module itself. Finally, the namespace enables the entire section to be
collapsed in an editor if desired.</p>
</div>
<div class="section" id="disposables">
<h2>Disposables<a class="headerlink" href="#disposables" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">JavaScript does not support “destructors”, so the <code class="docutils literal notranslate"><span class="pre">IDisposable</span></code>
pattern is used to ensure resources are freed and can be claimed by
the Garbage Collector when no longer needed. It should always be safe
to <code class="docutils literal notranslate"><span class="pre">dispose()</span></code> of an object more than once. Typically the object
that creates another object is responsible for calling the dispose
method of that object unless explicitly stated otherwise.</div>
<div class="line">To mirror the pattern of construction, <code class="docutils literal notranslate"><span class="pre">super.dispose()</span></code> should be
called last in the <code class="docutils literal notranslate"><span class="pre">dispose()</span></code> method if there is a parent class.
Make sure any signal connections are cleared in either the local or
parent <code class="docutils literal notranslate"><span class="pre">dispose()</span></code> method. Use a sentinel value to guard against
reentry, typically by checking if an internal value is null, and then
immediately setting the value to null. A subclass should never
override the <code class="docutils literal notranslate"><span class="pre">isDisposed</span></code> getter, because it short-circuits the
parent class getter. The object should not be considered disposed
until the base class <code class="docutils literal notranslate"><span class="pre">dispose()</span></code> method is called.</div>
</div>
</div>
<div class="section" id="messages">
<h2>Messages<a class="headerlink" href="#messages" title="Permalink to this headline">¶</a></h2>
<p>Messages are intended for many-to-one communication where outside
objects influence another object. Messages can be conflated and
processed as a single message. They can be posted and handled on the
next animation frame.</p>
</div>
<div class="section" id="signals">
<h2>Signals<a class="headerlink" href="#signals" title="Permalink to this headline">¶</a></h2>
<p>Signals are intended for one-to-many communication where outside objects
react to changes on another object. Signals are always emitted with the
sender as the first argument, and contain a single second argument with
the payload. Signals should generally not be used to trigger the
“default” behavior for an action, but to enable others to trigger
additional behavior. If a “default” behavior is intended to be provided
by another object, then a callback should be provided by that object.
Wherever possible as signal connection should be made with the pattern
<code class="docutils literal notranslate"><span class="pre">.connect(this._onFoo,</span> <span class="pre">this)</span></code>. Providing the <code class="docutils literal notranslate"><span class="pre">this</span></code> context enables
the connection to be properly cleared by <code class="docutils literal notranslate"><span class="pre">clearSignalData(this)</span></code>.
Using a private method avoids allocating a closure for each connection.</p>
</div>
<div class="section" id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h2>
<p>Some of the more advanced widgets have a model associated with them. The
common pattern used is that the model is settable and must be set
outside of the constructor. This means that any consumer of the widget
must account for a model that may be <code class="docutils literal notranslate"><span class="pre">null</span></code>, and may change at any
time. The widget should emit a <code class="docutils literal notranslate"><span class="pre">modelChanged</span></code> signal to enable
consumers to handle a change in model. The reason to enable a model to
swap is that the same widget could be used to display different model
content while preserving the widget’s location in the application. The
reason the model cannot be provided in the constructor is the
initialization required for a model may have to call methods that are
subclassed. The subclassed methods would be called before the subclass
constructor has finished evaluating, resulting in undefined state.</p>
</div>
<div class="section" id="getters-vs-methods">
<span id="id1"></span><h2>Getters vs. Methods<a class="headerlink" href="#getters-vs-methods" title="Permalink to this headline">¶</a></h2>
<p>Prefer a method when the return value must be computed each time. Prefer
a getter for simple attribute lookup. A getter should yield the same
value every time.</p>
</div>
<div class="section" id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<p>For public API, we have three options: JavaScript <code class="docutils literal notranslate"><span class="pre">Array</span></code>,
<code class="docutils literal notranslate"><span class="pre">IIterator</span></code>, and <code class="docutils literal notranslate"><span class="pre">ReadonlyArray</span></code> (an interface defined by
TypeScript).</p>
<p>Prefer an <code class="docutils literal notranslate"><span class="pre">Array</span></code> for:</p>
<ul class="simple">
<li><p>A value that is meant to be mutable.</p></li>
</ul>
<p>Prefer a <code class="docutils literal notranslate"><span class="pre">ReadonlyArray</span></code></p>
<ul class="simple">
<li><p>A return value is the result of a newly allocated array, to avoid the
extra allocation of an iterator.</p></li>
<li><p>A signal payload - since it will be consumed by multiple listeners.</p></li>
<li><p>The values may need to be accessed randomly.</p></li>
<li><p>A public attribute that is inherently static.</p></li>
</ul>
<p>Prefer an <code class="docutils literal notranslate"><span class="pre">IIterator</span></code> for:</p>
<ul class="simple">
<li><p>A return value where the value is based on an internal data structure
but the value should not need to be accessed randomly.</p></li>
<li><p>A set of return values that can be computed lazily.</p></li>
</ul>
</div>
<div class="section" id="dom-events">
<h2>DOM Events<a class="headerlink" href="#dom-events" title="Permalink to this headline">¶</a></h2>
<p>If an object instance should respond to DOM events, create a
<code class="docutils literal notranslate"><span class="pre">handleEvent</span></code> method for the class and register the object instance as
the event handler. The <code class="docutils literal notranslate"><span class="pre">handleEvent</span></code> method should switch on the event
type and could call private methods to carry out the actions. Often a
widget class will add itself as an event listener to its own node in the
<code class="docutils literal notranslate"><span class="pre">onAfterAttach</span></code> method with something like
<code class="docutils literal notranslate"><span class="pre">this.node.addEventListener('mousedown',</span> <span class="pre">this)</span></code> and unregister itself
in the <code class="docutils literal notranslate"><span class="pre">onBeforeDetach</span></code> method with
<code class="docutils literal notranslate"><span class="pre">this.node.removeEventListener('mousedown',</span> <span class="pre">this)</span></code> Dispatching events
from the <code class="docutils literal notranslate"><span class="pre">handleEvent</span></code> method makes it easier to trace, log, and debug
event handling. For more information about the <code class="docutils literal notranslate"><span class="pre">handleEvent</span></code> method,
see the
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/EventListener">EventListener</a>
API.</p>
</div>
<div class="section" id="promises">
<h2>Promises<a class="headerlink" href="#promises" title="Permalink to this headline">¶</a></h2>
<p>We use Promises for asynchronous function calls, and a shim for browsers
that do not support them. When handling a resolved or rejected Promise,
make sure to check for the current state (typically by checking an
<code class="docutils literal notranslate"><span class="pre">.isDisposed</span></code> property) before proceeding.</p>
</div>
<div class="section" id="command-names">
<h2>Command Names<a class="headerlink" href="#command-names" title="Permalink to this headline">¶</a></h2>
<p>Commands used in the application command registry should be formatted as
follows: <code class="docutils literal notranslate"><span class="pre">package-name:verb-noun</span></code>. They are typically grouped into a
<code class="docutils literal notranslate"><span class="pre">CommandIDs</span></code> namespace in the extension that is not exported.</p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="notebook.html" title="previous page">Notebook</a>
    <a class='right-next' id="next-link" href="css.html" title="next page">CSS Patterns</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.30270b6e4c972e43c488.js"></script>


    <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Project Jupyter.<br/>
        The Jupyter Trademark is registered with the U.S. Patent &amp Trademark Office.
        

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

  </body>
</html>